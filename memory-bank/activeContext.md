# Active Context

## 目前專案狀態

**專案階段**: 功能完善階段  
**當前分支**: `feature/20250810-streamlit`  
**最後更新**: 2025-08-19  

## 最近完成的工作

### ✅ 已完成功能
1. **核心工作流程**
   - YouTube 影片下載 (yt-dlp)
   - Whisper 語音轉錄 (faster-whisper)
   - 多 LLM 摘要生成 (Gemini/OpenAI/Ollama)
   - 檔案管理和清理

2. **使用者介面**
   - 命令列介面 (`main.py`)
   - Streamlit Web 應用 (`streamlit_app.py`)
   - Makefile 自動化腳本

3. **檔案處理優化**
   - 檔名清理和截斷功能
   - Unicode 中文檔名支援
   - 自動檔案刪除機制

4. **容器化部署**
   - Docker 環境配置
   - Docker Compose 編排
   - 開發環境一致性

## 目前工作重點

### 🔄 進行中
1. **記憶庫系統整合**
   - Kiro-Lite 工作流程整合
   - 專案文件標準化
   - 開發規範建立

2. **測試覆蓋率提升**
   - 現有測試: `test_file_manager.py`, `test_filename_truncation.py`
   - 需要補充: 轉錄、摘要、整合測試

### 📋 待辦事項
1. **功能增強**
   - 批次處理優化
   - 錯誤恢復機制
   - 進度追蹤改善

2. **使用者體驗**
   - Streamlit 介面優化
   - 更好的錯誤訊息
   - 處理狀態顯示

3. **效能優化**
   - 平行處理支援
   - 記憶體使用優化
   - 大檔案處理改善

## 技術決策記錄

### 最近決策
1. **使用 faster-whisper 替代標準 whisper**
   - 理由: 效能顯著提升，記憶體使用減少
   - 狀態: 已實施

2. **預設使用 Google Gemini**
   - 理由: 免費額度較高，中文處理較好
   - 狀態: 已實施

3. **檔案自動清理策略**
   - 理由: 防止磁碟空間耗盡
   - 狀態: 已實施

### 待決策議題
1. **是否需要資料庫支援**
   - 目前使用檔案系統，是否需要 SQLite?

2. **批次處理並行化**
   - 是否實施多線程/多進程處理?

3. **Web 介面增強**
   - 是否需要使用者認證和會話管理?

## 已知問題

### 🐛 Bug 清單
1. **檔名長度問題** ✅ 已修復
   - 問題: 中文檔名過長導致檔案創建失敗
   - 解決: 實施檔名截斷功能

2. **yt-dlp 版本相容性**
   - 問題: YouTube 網站變更可能導致下載失敗
   - 狀態: 監控中

### ⚠️ 技術債務
1. **錯誤處理不一致**
   - 各模組錯誤處理方式不統一
   - 需要標準化錯誤處理模式

2. **測試覆蓋率不足**
   - 核心功能缺乏單元測試
   - 需要增加整合測試

3. **設定檔管理**
   - 硬編碼配置需要抽離
   - 需要建立設定檔系統

## 近期里程碑

### 🎯 第一季目標 (Q1 2025)
- [ ] 完善測試套件
- [ ] 效能基準測試
- [ ] 文件完整化
- [ ] 發布 v1.0 版本

### 🔮 未來規劃
- 多語言摘要支援
- 即時串流處理
- 企業級部署方案
- 外掛系統架構